<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>E-Voting 2.0 Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

  <div class="flex">

    <!-- Sidebar Section -->
    <section>
      <aside class="w-64 bg-white min-h-screen border-r">
        <div class="p-6">
          <h1 class="text-xl font-bold text-green-600 mb-6">
            E-Voting <span class="text-gray-400 text-sm">v2.0</span>
          </h1>
          <nav class="space-y-3">
            <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
              <span class="material-icons mr-2"></span>Organize an Election
            </a>
            <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
              <span class="material-icons mr-2"></span>View Election Result
            </a>
            <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
              <span class="material-icons mr-2"></span>View Voter List
            </a>
            <a href="#" class="flex items-center p-2 rounded hover:bg-gray-100">
              <span class="material-icons mr-2"></span>View Candidate list
            </a>
            <a href="/login" class="flex items-center p-2 rounded hover:bg-gray-100">
              <span class="material-icons mr-2"></span>
              Login to vote
            </a>
          </nav>
        </div>
      </aside>
    </section>

    <!-- Main Content Section -->
    <section class="flex-1 p-6">

      <!-- Header Section -->
      <section class="mb-6">
        <div class="flex justify-between items-center">
          <!-- Left: Greeting -->
          <div>
            <h2 class="text-2xl font-bold text-gray-800">Welcome {{ user_name | default('-') }}</h2>
          </div>
          <!-- Right: Search, Notifications, Avatar -->
          <div class="flex items-center space-x-4">
            <input 
              type="text" 
              placeholder="Search elections..." 
              class="px-5 py-2.5 rounded-full border border-gray-300 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400 w-64"
            >
            <button class="relative p-2 rounded-full hover:bg-gray-100 transition">
              <span class="material-icons text-gray-600">notifications</span>
              <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
            </button>
            <div class="w-10 h-10 rounded-full bg-purple-500 text-white flex items-center justify-center font-semibold">
              {{ user_initial | default('-') }}
            </div>
          </div>
        </div>
      </section>

      <!-- Vote Banner Section -->
      <section class="mb-6">
        <div class="bg-gradient-to-r from-green-400 to-blue-500 text-white p-6 rounded-lg shadow-md">
          <h3 class="text-2xl font-bold mb-2">Your Vote Matters!</h3>
          <p class="text-white/90 text-lg">Make your voice heard in the elections. Check the active elections below.</p>
        </div>
      </section>

      <!-- Stats Section -->
      <section class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="bg-white p-4 rounded shadow">
          <p class="text-gray-500">Total Elections</p>
          <h3 class="text-2xl font-bold">{{ total_elections }}</h3>
        </div>
        <div class="bg-white p-4 rounded shadow">
          <p class="text-gray-500">Votes Cast</p>
          <h3 class="text-2xl font-bold">{{ votes_cast }}</h3>
        </div>
        <div class="bg-white p-4 rounded shadow">
          <p class="text-gray-500">Upcoming Elections</p>
          <h3 class="text-2xl font-bold">{{ upcoming_elections }}</h3>
        </div>
      </section>

      <!-- Active Elections Section -->
      <section class="mb-6">
        <h3 class="text-xl font-bold mb-3">Active Elections</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          {% for election in active_elections %}
          <div class="bg-white p-4 rounded shadow border-l-4 {% if election.status == 'active' %}border-green-400{% elif election.status == 'upcoming' %}border-yellow-400{% else %}border-gray-400{% endif %}">
            <h4 class="font-bold">{{ election.title }}</h4>
            <p class="text-gray-500 mb-2">{{ election.description }}</p>
            <p class="text-gray-500 text-sm">Start: {{ election.start_date }} | End: {{ election.end_date }}</p>
            <p class="text-{% if election.status == 'upcoming' %}yellow{% elif election.status == 'active' %}blue{% else %}gray{% endif %}-500 text-sm mb-2">
              {% if election.status == 'active' %}Time remaining: {{ election.time_remaining }}{% elif election.status == 'upcoming' %}Upcoming{% else %}Election Ended{% endif %}
            </p>
            <button class="{% if election.status == 'active' %}bg-gradient-to-r from-blue-500 to-green-500 text-white{% else %}bg-gray-300 text-gray-500 cursor-not-allowed{% endif %} px-4 py-2 rounded mt-2 w-full">
              {% if election.status == 'active' %}Vote Now{% elif election.status == 'upcoming' %}Coming Soon{% else %}Election Ended{% endif %}
            </button>
          </div>
          {% endfor %}
        </div>
      </section>

      <!-- Recent Activity Section -->
      <section>
        <h3 class="text-xl font-bold mb-3">Recent Activity</h3>
        <div class="space-y-2">
          {% for activity in recent_activity %}
          <div class="bg-white p-4 rounded shadow flex justify-between items-center">
            <span>{{ activity.title }} <br> <small class="text-gray-500">{{ activity.date }}</small></span>
            <a href="{{ activity.receipt_url }}" class="text-blue-500 underline">Download Receipt</a>
          </div>
          {% endfor %}
        </div>
      </section>

    </section> <!-- End Main Content Section -->

  </div> <!-- End Flex -->

</body>
</html>